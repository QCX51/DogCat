<!DOCTYPE html>
<html >
<head>
    <meta charset="UTF-8">
    
    <title>Descripción mascota</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/cat_dogs.css" />
    <script type="text/javascript" src="js/backend.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <script type="text/javascript" src="js/main.js"></script>


</head>

<body>
<nav class="navbar">
<div class="navbar-overlay" onclick="toggleMenuOpen()"></div>
<button type="button" class="navbar-burger" onclick="toggleMenuOpen()">
<span class="material-icons">Menu</span>
</button>
<button class="button_again2">Volver</button>
<nav class="navbar-menu" style="padding: 10px;">
<button type="button" class="button_adopcion" onclick="select('dogs')">ADOPTA UN PERRO</button>
<button class="button_adopcion" onclick="select('cats')">ADOPTA UN GATO</button>
</nav>
</nav>

<!-- inicio depagina de descripcion de la mascota -->

<div class="container" style="min-height: 80vh;" >
    <div class="foto_description" >
        <h1 id="title_foto">FOTOS</h1>
<h1 id="title_description" >Información General</h1>
</div>
<div class="foto-mascota" id="divContenedor">

</div>


<!-- seccion de la descripcion de la mascota de modo responsivo -->

<div class="detalles-mascota" id="divCont2">

    
</div>

    <!-- modo de pagina de texto -->

<div class="container" style="min-height: 75vh; background-color: #F6D581; margin: 0px;" >
    <h1 id="title_dogs" style="text-align: center; padding-top: 20px; margin-bottom: 0px;  color: black;">quizás quieras conocer a</h1>

<!-- modo responsivo del texto -->

<div class="version_resp">
    <h1 id="title_dogs" style="text-align: center; padding-top: 20px; margin-bottom: 0px;  color: black;">quizás quieras conocer a</h1>
    </div>


<!-- catalogo de mascotas de la pagina normal-->

    <div class="store-adopt">
    <section class="product-animals2" id="sec4">

    
    </section>
    </div>

    <!-- Modo respondivo de catalogo  -->
    
        <div id="carrusel">
          <a href="#" class="left-arrow"><img src="images/left-arrow.png" /></a>
          <a href="#" class="right-arrow"><img src="images/right-arrow.png" /></a>
          <div class="carrusel" id="car444">


          </div>

<footer>
</footer>


<!-- Script de carrusel del modo responsivo -->


<script src="js/jquery-3.3.1.min.js"></script>
<script>
var current = 0;
var imagenes = new Array();
 
$(document).ready(function() {
    var numImages = 6;
    if (numImages <= 2) {
        $('.right-arrow').css('display', 'none');
        $('.left-arrow').css('display', 'none');
    }
 
    $('.left-arrow').on('click',function() {
        if (current > 0) {
            current = current - 1;
        } else {
            current = numImages - 2;
        }
 
        $(".carrusel").animate({"left": -($('#product_'+current).position().left)}, 600);
 
        return false;
    });
 
    $('.left-arrow').on('hover', function() {
        $(this).css('opacity','0.5');
    }, function() {
        $(this).css('opacity','1');
    });
 
    $('.right-arrow').on('hover', function() {
        $(this).css('opacity','0.5');
    }, function() {
        $(this).css('opacity','1');
    });
 
    $('.right-arrow').on('click', function() {
        if (numImages > current + 2) {
            current = current+1;
        } else {
            current = 0;
        }
 
        $(".carrusel").animate({"left": -($('#product_'+current).position().left)}, 600);
 
        return false;
    }); 

            //Los datos son enviados a develop/php/selectCatalogo.php para ser procesados 

            $.post('php/selectMascotaDescription.php',{
        id:localStorage.getItem("idMascotaDescription")
    },function(data){
        //Aqui se obtiene la respuesta 
        var insertRespuesta = JSON.parse(data);
        if (insertRespuesta!=null) {
            //Si se obtuvieron los datos correctos serán mostrados en pantalla
            if (insertRespuesta.response == "SUCCESS") {
              console.log("SUCCESS");
              let divCont = document.getElementById("divContenedor");
              let divCont2 = document.getElementById("divCont2");
              let detail = insertRespuesta.detail;
              detail.forEach(row1 => {
                console.log(row1);
                divCont.innerHTML = `
                
                <div class="foto-adopcion">
                        <img src=${row1.foto} alt="" >
                    </div>
                    
                                    <!-- seccion de descripcion de la mascota -->

                        <section class="detalles-animal">
                            <div class="detalle-animales" category="">
                            <ul style="margin-top:0px ;">
                                <div class="detalle-animal">
                                <li class="description-mascota">Nombre: </li><h5 class="datos">${row1.nombre}</h5> </div>
                                <div class="detalle-animal"> <li class="description-mascota">Color:</li><h5 class="datos">${row1.color}</h5> </div>
                                <div class="detalle-animal"> <li class="description-mascota">Sexo:</li><h5 class="datos">${row1.sexo}</h5>  </div>
                                <div class="detalle-animal"><li class="description-mascota">Esterilizada(o):</li><h5 class="datos">${row1.esterilizado}</h5></div> 
                                <div class="detalle-animal"><li class="description-mascota">Talla:</li><h5 class="datos">${row1.talla}</h5> </div>
                                <div class="detalle-animal"><li class="description-mascota">Edad:</li><h5 class="datos">${row1.edad+" años"}</h5> </div>
                            </ul>
                            </div>
                        </section>
                        
                        <section class="detalles-animal">
                            <div class="detalle-animales" category="">
                            <ul style="margin-top:0px ;">

                                <div class="detalle-animal"><li class="description-mascota">DESCRIPCIÓN GENERAL </li> </div>
                            </ul>

                            <div class="buscador_category" style="text-align:center; margin:20px;">
                                <button class="button_adopcion2" style="background-color: #FF0000;">ADOPTAR AHORA</button></div>
                            </div>
                        </section>
                    </div>
                
                
                `;



                divCont2.innerHTML = `
                
                <section class="detalles-animal">
                    <div class="detalle-animales" category="">
                        <ul style="margin-top:0px ;    padding-left: 0px;">
                            <div class="detalle-animal">
                            <li class="description-mascota">Nombre: </li><h5 class="datos">${row1.nombre}</h5> </div>
                            <div class="detalle-animal"> <li class="description-mascota">Color:</li><h5 class="datos">${row1.color}</h5> </div>
                            <div class="detalle-animal"> <li class="description-mascota">Sexo:</li><h5 class="datos">${row1.sexo}</h5>  </div>
                            <div class="detalle-animal"><li class="description-mascota">Esterilizada(o):</li><h5 class="datos">${row1.esterilizado}</h5></div> 
                            <div class="detalle-animal"><li class="description-mascota">Talla:</li><h5 class="datos">${row1.talla}</h5> </div>
                            <div class="detalle-animal"><li class="description-mascota">Edad:</li><h5 class="datos">${row1.edad+" años"}</h5> </div>
                        </ul>
                    </div>
                </section>
                <section class="detalles-animal">
                    <div class="detalle-animales" category="">
                        <ul style="margin-top:0px ;">

                            <div class="detalle-animal"><li class="description-mascota">DESCRIPCIÓN GENERAL </li> </div>
                        </ul>

                        <div class="buscador_category" style="text-align:center; margin:20px;">
                            <button class="button_adopcion2" style="background-color: #FF0000;">ADOPTAR AHORA</button></div>
                    </div>
                </section>                
                
                
                `;

                $.post('php/selectMascotaBusqueda.php',{
                    nombre:row1.nombre,
                    sexo:row1.sexo,
                    talla:row1.talla,
                    raza:row1.raza
                },function(data2){
                    if (data2!=null) {
                        //Aqui se obtiene la respuesta 
                        var insertRespuesta2 = JSON.parse(data2);
                        if (insertRespuesta2.response == "SUCCESS") {
                            var contador2 = 0;
                            let secCont4 = document.getElementById("sec4");
                            let car44 = document.getElementById('car444');
                            let detail2 = insertRespuesta2.detail;
                            detail2.forEach(row3 => {
                                if(row3.id != row1.id){

                                    secCont4.innerHTML += `
                                
                                    <div class="product-item" category="">
                                        <img src=${row3.foto} alt="">
                                        <h2 class="nombre_mascota" > ${row3.nombre}</h2>
                                        <div class="buscador_category" style="text-align:center; margin:20px;">
                                        <button class="button_adopcion2" onclick="conocerMascota7(${row3.id});">CONOCER</button>
                                        <button class="button_adopcion3">ADOPTAME</button>
                                        </div>
                                    </div>
                                    
                                    `;


                                    car44.innerHTML += `
                                    
                                    <div class="product-item" id="product_${contador2}" category="">
                                        <img src=${row3.foto} width="195" height="100" alt="">
                                        <h2 class="nombre_mascota" > ${row3.nombre}</h2>
                                        <div class="buscador_category2" style="text-align:center;">
                                            <button class="button_adopcion2" onclick="conocerMascota7(${row3.id});">CONOCER</button>
                                            <button class="button_adopcion3">ADOPTAME</button>
                                        </div>
                                    </div>
                                    
                                    `;
                                    
                                    contador2 = contador2 + 1;

                                }


                            });
                        }
                    }
                });

              });
            } else {
              alert('Ha ocurrido un error, intetelo mas tarde');
            }
        }else{
            alert('Ha ocurrido un error, intetelo mas tarde');
            window.location= 'index.php';
        }


        
    });


 });


    function conocerMascota7(id) {
      console.log(id);
      localStorage.setItem("idMascotaDescription",id);
      console.log(localStorage.getItem("idMascotaDescription"));
      window.location.reload();
    }



</script>

<!-- fin del script de carrusel del modo responsivo -->


</body>