<!DOCTYPE html>
<html style="background-image: url(/public/images/fondo_cat.jpg);">
<head>
  <meta charset="UTF-8">
    
    <title>Catalogo mascotas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/cat_dogs.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <script type="text/javascript" src="js/main.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />



</head>
    <script
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKH3MFAxTeIHbLHs7KzJnp8xkFsmheCCo&callback=initMap&libraries=&v=weekly"
defer>
</script>
<body>
<nav class="navbar">
<div class="navbar-overlay" onclick="toggleMenuOpen()"></div>
<button type="button" class="navbar-burger" onclick="toggleMenuOpen()">
<span class="material-icons">Menu</span>
</button>
<img class="img_amigo" src="/public/images/amigo_dog.jpg"></img>
<h1 class="text_amigo">Un nuevo compa침ero de<br></br>vida te espera</h1>
<nav class="navbar-menu" style="padding: 10px;">
 

<button class="button_adopcion" onclick="select('cats')">ADOPTA UN GATO</button>
<button class="button_again2">Volver</button>
</nav>
</nav>


<!--  Inicio de la pagina -->


<div class="container" >


<h1 id="title_dogs">Perros en espera de adopci칩n....</h1>


      <!-- Seccion de categoria de busqueda -->


<div class="store-adopt">
    <div class="category-list" style="background-color: #F6D581;">
        <h2 class="title_cat">Nombre de la mascota</h2>
        <div class="buscar"  style="margin-left: 20px;">
            <input type="text" placeholder="Buscar" id="nombrebusqueda9" required />
            <div class="btn" style="margin-right: 20px;">
              <i class="fas fa-search icon"></i>
            </div>
          </div>
          <h2 class="title_cat" >Sexo</h2>
          <div class="buscador_category" style="margin:20px;">
          <input type="radio" name="sexo" value="hembra" id="hembra" />
          <label for="hembra" id="hembra">Hembra</label>
          <input type="radio" name="sexo" value="macho" id="Macho" />
          <label for="macho" id="Macho" >Macho</label>
          </div>
          <h2 class="title_cat">Talla</h2>
        <div class="buscar" style="margin-left: 20px;">
            <input type="text" placeholder="Buscar" id="tallabusqueda9" required />
            <div class="btn" style="margin-right: 20px;">
              <i class="fas fa-search icon"></i>
            </div>
          </div>
          <div class="buscador_category" style=" text-align:center; margin:20px;">
          <button class="button_adopcion2" onclick="btnbusqueda999();">BUSCAR</button>
          <button class="button_adopcion3" onclick="btncancelar999();">CANCELAR</button>
        </div>
    </div>


<!-- Seccion de catalogo de mascotas de pagina web -->

<section class="product-animals" id="divContainer">

</section>

</div>

<!-- Seccion de pagina catalogo modo responsivo -->


<div class="version_resp">
<h1 id="title_dogs">Perros en espera de adopci칩n....</h1>
</div>



  <!-- Seccion de catalogo modo carrusel -->


<div id="carrusel">
  <a href="#" class="left-arrow"><img src="images/left-arrow.png" /></a>
  <a href="#" class="right-arrow"><img src="images/right-arrow.png" /></a>
  <div class="carrusel" id="divCarrusel">

  </div>
</div>
</div>
</div>

<footer>
</footer>


<script type="module" src="js/backend.js"></script>
<script type="text/javascript" src="js/hello.all.js"></script>
<script type="text/javascript" src="js/main.js"></script>
    <!-- Script de carrusel del modo responsivo -->

    <script src="js/jquery-3.3.1.min.js"></script>
    <script>
    var current = 0;
    var imagenes = new Array();
     
    $(document).ready(function() {
        var numImages = 6;
        if (numImages <= 2) {
            $('.right-arrow').css('display', 'none');
            $('.left-arrow').css('display', 'none');
        }
     
        $('.left-arrow').on('click',function() {
            if (current > 0) {
                current = current - 1;
            } else {
                current = numImages - 2;
            }
     
            $(".carrusel").animate({"left": -($('#product_'+current).position().left)}, 600);
     
            return false;
        });
     
        $('.left-arrow').on('hover', function() {
            $(this).css('opacity','0.5');
        }, function() {
            $(this).css('opacity','1');
        });
     
        $('.right-arrow').on('hover', function() {
            $(this).css('opacity','0.5');
        }, function() {
            $(this).css('opacity','1');
        });
     
        $('.right-arrow').on('click', function() {
            if (numImages > current + 2) {
                current = current+1;
            } else {
                current = 0;
            }
     
            $(".carrusel").animate({"left": -($('#product_'+current).position().left)}, 600);
     
            return false;
        }); 


        console.log("A partir de aqui empiezo");

            //Los datos son enviados a develop/php/selectCatalogo.php para ser procesados 
    $.post('php/selectCatalogo.php',{
        raza:"perro"
    },function(data){
        //Aqui se obtiene la respuesta 
        var insertRespuesta = JSON.parse(data);
        if (insertRespuesta!=null) {
            let divCont = document.getElementById("divContainer");
            let divCar = document.getElementById("divCarrusel");
            //Si se obtuvieron los datos correctos ser치n mostrados en pantalla
            if (insertRespuesta.response == "SUCCESS") {
              console.log("SUCCESS");
              let detail = insertRespuesta.detail;
              detail.forEach(row1 => {
                divCont.innerHTML += `

                  <div class="product-item" category="">
                    <img src=${row1.foto} alt="">
                    <h2 class="nombre_mascota" >${row1.nombre}</h2>
                    <div class="buscador_category" style="text-align:center; margin:20px;">
                      <button class="button_adopcion2" onclick="conocerMascota7(${row1.id});">CONOCER</button>
                      <button class="button_adopcion3">ADOPTAME</button>
                    </div>
                  </div>               
                
                `;

                divCar.innerHTML += `

                <div class="product-item" id="product_${row1.id}" category="">
                  <img src=${row1.foto} width="195" height="100" alt="">
                  <h2 class="nombre_mascota" > ${row1.nombre}</h2>
                  <div class="buscador_category2" style="text-align:center;">
                  <button class="button_adopcion2" onclick="conocerMascota7(${row1.id});">CONOCER</button>
                  <button class="button_adopcion3">ADOPTAME</button>
                  </div>
                </div>             
                
                `;

              });
            } else {
              alert('Ha ocurrido un error, intetelo mas tarde');
            }
        }else{
            alert('Ha ocurrido un error, intetelo mas tarde');
            window.location= 'index.php';
        }


        
    });


     });

     function conocerMascota7(id) {
      console.log(id);
      localStorage.setItem("idMascotaDescription",id);
      console.log(localStorage.getItem("idMascotaDescription"));
      window.location= 'Description.html'; 
    }


    
    function btnbusqueda999(){
      console.log('buscar');
      let sex = $('input[name="sexo"]:checked').val();
      let nom = document.getElementById('nombrebusqueda9').value;
      let tll = document.getElementById('tallabusqueda9').value;
      console.log(sex);
      console.log(nom);
      console.log(tll);

      $.post('php/selectMascotaBusqueda.php',{
                    nombre:nom,
                    sexo:sex,
                    talla:tll,
                    raza:"perro"
                },function(data6){
                    if (data6!=null) {
                        var insertRespuesta6 = JSON.parse(data6);
                        console.log(insertRespuesta6);
                        let divCont9 = document.getElementById("divContainer");
                        let divCar9 = document.getElementById("divCarrusel");
                        divCont9.innerHTML = "";
                        divCar9.innerHTML = "";
 
                        if (insertRespuesta6.response == "SUCCESS") {
                            var contador3 = 0;
                            let detail6 = insertRespuesta6.detail;
                            detail6.forEach(row6 => {


                              divCont9.innerHTML += `
   
                  
                                <div class="product-item" category="">
                                <img src=${row6.foto} alt="">
                                <h2 class="nombre_mascota" >${row6.nombre}</h2>
                                <div class="buscador_category" style="text-align:center; margin:20px;">
                                <button class="button_adopcion2" onclick="conocerMascota7(${row6.id});">CONOCER</button>
                                <button class="button_adopcion3">ADOPTAME</button>
                                </div>
                                </div>
                              
                              `;

                              divCar9.innerHTML += `


                              <div class="product-item" id="product_${contador3}" category="">
                                <img src=${row6.foto} width="195" height="100" alt="">
                                <h2 class="nombre_mascota" >${row6.nombre}</h2>
                                <div class="buscador_category2" style="text-align:center;">
                                  <button class="button_adopcion2" onclick="conocerMascota7(${row6.id});">CONOCER</button>
                                  <button class="button_adopcion3">ADOPTAME</button>
                                </div>
                              </div>
                              
                              `;



                              contador3 = contador3+1;                               


                            });
                        }


                    }else{
                      console.log("sin resultados");
                    }
                });
                
    }


function btncancelar999() {
  window.location.reload();
}



    </script>

        <!-- fin del script de carrusel del modo responsivo -->

</body>
</html>